<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Lesson — Guarded Rose</title>
  <meta name="description" content="Guarded Rose — Ashes into Beauty">
  <link rel="icon" href="assets/logo.jpg">
  <script src="https://cdn.tailwindcss.com"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Poppins:wght@300;400;600&display=swap');
    body { font-family: 'Poppins', sans-serif; background:#fff7f7; }
    .title-font { font-family: 'Playfair Display', serif; }
  </style>
</head>
<body class="text-rose-900">
<header class="sticky top-0 z-50 bg-white/80 backdrop-blur border-b">
  <div class="max-w-6xl mx-auto px-4 py-3 flex items-center gap-3">
    <a href="index.html" class="flex items-center gap-2">
      <img src="assets/logo.jpg" class="h-8 w-8 rounded-md" alt="Guarded Rose logo">
      <span class="title-font text-xl font-bold">Guarded Rose</span>
    </a>
    <nav class="ml-auto flex items-center gap-5 text-sm">
      <a href="about.html" class="hover:underline">About</a>
      <a href="curriculum.html" class="hover:underline">Curriculum</a>
      <a href="pricing.html" class="hover:underline">Pricing</a>
      <a href="dashboard.html" class="hover:underline">Dashboard</a>
      <a href="login.html" class="px-3 py-1 rounded bg-rose-600 text-white">Log in</a>
    </nav>
  </div>
</header>

<main class="max-w-3xl mx-auto px-4 py-12">
  <a href="curriculum.html" class="text-sm underline">← Back to curriculum</a>
  <article id="lesson" class="mt-4 p-6 border rounded bg-white"></article>
  <section class="mt-6 p-6 border rounded bg-white">
    <h3 class="font-semibold mb-2">Journal</h3>
    <textarea id="journal" class="w-full border rounded p-3 h-40" placeholder="Write what you are learning..."></textarea>
    <div class="mt-3 flex gap-2">
      <button id="saveBtn" class="px-4 py-2 rounded bg-rose-600 text-white">Save</button>
      <button id="completeBtn" class="px-4 py-2 rounded border">Mark complete</button>
    </div>
    <p class="text-xs text-rose-900/60 mt-2">Saved locally in your browser.</p>
  </section>
</main>
<script>
  const id = parseInt(new URLSearchParams(location.search).get('id')||'1');
  function key(){ return 'gr_journal_'+id; }
  function load(){ document.getElementById('journal').value = localStorage.getItem(key())||''; }
  function save(){ localStorage.setItem(key(), document.getElementById('journal').value); }
  document.getElementById('saveBtn').onclick = save;
  document.getElementById('completeBtn').onclick = () => {
    const p = new Set(JSON.parse(localStorage.getItem('gr_progress')||'[]')); p.add(id);
    localStorage.setItem('gr_progress', JSON.stringify([...p])); alert('Marked complete!');
  };
  fetch('data/lessons.json').then(r=>r.json()).then(data=>{
    const L = data.find(d=>d.day===id) || data[0];
    const el = document.getElementById('lesson');
    el.innerHTML = `
      <div class="text-xs text-rose-900/60">Day ${L.day}</div>
      <h1 class="title-font text-2xl font-bold mb-2">${L.title}</h1>
      ${L.verse ? `<div class='p-3 rounded bg-rose-100 text-sm'><strong>Focus:</strong> ${L.verse}</div>`:''}
      <div class="prose mt-4">${L.content||''}</div>
      ${L.declaration ? `<div class='mt-4 p-4 bg-rose-50 rounded'><strong>Declaration:</strong> ${L.declaration}</div>`:''}
      ${L.action ? `<div class='mt-3 p-4 bg-rose-50 rounded'><strong>Action:</strong> ${L.action}</div>`:''}
    `;
    load();
  });
</script>

<footer class="mt-20 border-t">
  <div class="max-w-6xl mx-auto px-4 py-10 grid sm:grid-cols-3 gap-6">
    <div>
      <div class="flex items-center gap-2">
        <img src="assets/logo.jpg" class="h-6 w-6 rounded">
        <span class="font-semibold">Guarded Rose</span>
      </div>
      <p class="text-sm text-rose-800/80 mt-3">Ashes into Beauty — 40‑day transformation.</p>
    </div>
    <div>
      <h4 class="font-semibold mb-2">Explore</h4>
      <ul class="text-sm space-y-1">
        <li><a href="curriculum.html" class="hover:underline">Curriculum</a></li>
        <li><a href="dashboard.html" class="hover:underline">Dashboard</a></li>
        <li><a href="contact.html" class="hover:underline">Contact</a></li>
      </ul>
    </div>
    <div>
      <h4 class="font-semibold mb-2">Legal</h4>
      <ul class="text-sm space-y-1">
        <li><a href="terms.html" class="hover:underline">Terms</a> · <a href="privacy.html" class="hover:underline">Privacy</a></li>
    </div>
  </div>
  <div class="text-center text-xs text-rose-900/60 py-4">&copy; 2025 Guarded Rose. All rights reserved.</div>
</footer>
</body></html>
