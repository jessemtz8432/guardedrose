<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Dashboard — Guarded Rose</title>
  <meta name="description" content="Guarded Rose — Ashes into Beauty">
  <link rel="icon" href="assets/logo.jpg">
  <script src="https://cdn.tailwindcss.com"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Poppins:wght@300;400;600&display=swap');
    body { font-family: 'Poppins', sans-serif; background:#fff7f7; }
    .title-font { font-family: 'Playfair Display', serif; }
  </style>
</head>
<body class="text-rose-900">
<header class="sticky top-0 z-50 bg-white/80 backdrop-blur border-b">
  <div class="max-w-6xl mx-auto px-4 py-3 flex items-center gap-3">
    <a href="index.html" class="flex items-center gap-2">
      <img src="assets/logo.jpg" class="h-8 w-8 rounded-md" alt="Guarded Rose logo">
      <span class="title-font text-xl font-bold">Guarded Rose</span>
    </a>
    <nav class="ml-auto flex items-center gap-5 text-sm">
      <a href="about.html" class="hover:underline">About</a>
      <a href="curriculum.html" class="hover:underline">Curriculum</a>
      <a href="pricing.html" class="hover:underline">Pricing</a>
      <a href="dashboard.html" class="hover:underline">Dashboard</a>
      <a href="login.html" class="px-3 py-1 rounded bg-rose-600 text-white">Log in</a>
    </nav>
  </div>
</header>

<main class="max-w-6xl mx-auto px-4 py-12">
  <div class="flex items-center justify-between mb-6">
    <h1 class="title-font text-3xl font-bold">Your Journey</h1>
    <button id="reset" class="text-sm underline">Reset</button>
  </div>
  <div class="p-4 border rounded bg-white">
    <div id="progressText" class="text-sm"></div>
    <div class="w-full bg-rose-200/40 h-2 rounded my-3">
      <div id="bar" class="h-2 bg-rose-600 rounded" style="width:0%"></div>
    </div>
    <div id="next" class="text-sm"></div>
  </div>
  <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-3 mt-6" id="grid"></div>
</main>
<script>
  const PKEY = 'gr_progress';
  function getP(){ return new Set(JSON.parse(localStorage.getItem(PKEY)||'[]')); }
  function setP(v){ localStorage.setItem(PKEY, JSON.stringify([...v])); }
  document.getElementById('reset').onclick = ()=>{ localStorage.removeItem(PKEY); render(); };
  async function render(){
    const data = await (await fetch('data/lessons.json')).json();
    const p = getP(); const done = p.size, total = data.length; const pct = Math.round(done/total*100);
    document.getElementById('progressText').textContent = `${done} of ${total} complete (${pct}%)`;
    document.getElementById('bar').style.width = pct+'%';
    const next = data.find(d=>!p.has(d.day)) || data[data.length-1];
    document.getElementById('next').innerHTML = `Next: <a class="underline" href="lesson.html?id=${next.day}">Day ${next.day} — ${next.title}</a>`;
    const g = document.getElementById('grid'); g.innerHTML='';
    data.forEach(d=>{
      const a = document.createElement('a');
      const doneDay = p.has(d.day);
      a.href = `lesson.html?id=${d.day}`;
      a.className='block p-3 rounded border ' + (doneDay?'bg-green-50 border-green-300':'bg-white');
      a.innerHTML = `<div class='text-xs text-rose-900/60'>Day ${d.day}</div><div class='font-medium'>${d.title}</div>`;
      g.appendChild(a);
    });
  }
  render();
</script>

<footer class="mt-20 border-t">
  <div class="max-w-6xl mx-auto px-4 py-10 grid sm:grid-cols-3 gap-6">
    <div>
      <div class="flex items-center gap-2">
        <img src="assets/logo.jpg" class="h-6 w-6 rounded">
        <span class="font-semibold">Guarded Rose</span>
      </div>
      <p class="text-sm text-rose-800/80 mt-3">Ashes into Beauty — 40‑day transformation.</p>
    </div>
    <div>
      <h4 class="font-semibold mb-2">Explore</h4>
      <ul class="text-sm space-y-1">
        <li><a href="curriculum.html" class="hover:underline">Curriculum</a></li>
        <li><a href="dashboard.html" class="hover:underline">Dashboard</a></li>
        <li><a href="contact.html" class="hover:underline">Contact</a></li>
      </ul>
    </div>
    <div>
      <h4 class="font-semibold mb-2">Legal</h4>
      <ul class="text-sm space-y-1">
        <li><a href="terms.html" class="hover:underline">Terms</a> · <a href="privacy.html" class="hover:underline">Privacy</a></li>
    </div>
  </div>
  <div class="text-center text-xs text-rose-900/60 py-4">&copy; 2025 Guarded Rose. All rights reserved.</div>
</footer>
</body></html>
